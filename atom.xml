<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://tomhht.github.io</id>
    <title>hello, world</title>
    <updated>2020-09-13T01:41:54.588Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://tomhht.github.io"/>
    <link rel="self" href="https://tomhht.github.io/atom.xml"/>
    <logo>https://tomhht.github.io/images/avatar.png</logo>
    <icon>https://tomhht.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, hello, world</rights>
    <entry>
        <title type="html"><![CDATA[最小化安装centos和ubuntu之后的配置]]></title>
        <id>https://tomhht.github.io/post/zui-xiao-hua-an-zhuang-centos-hou-de-she-zhi/</id>
        <link href="https://tomhht.github.io/post/zui-xiao-hua-an-zhuang-centos-hou-de-she-zhi/">
        </link>
        <updated>2020-09-10T10:54:55.000Z</updated>
        <summary type="html"><![CDATA[<p>最小化安装centos8后的设置。</p>
]]></summary>
        <content type="html"><![CDATA[<p>最小化安装centos8后的设置。</p>
<!-- more -->
<h1 id="更换国内源">更换国内源</h1>
<p>参考<a href="/post/pei-zhi-ubuntu-he-centos-qing-hua-yuan">配置清华源</a></p>
<h1 id="更新软件">更新软件</h1>
<pre><code>dnf check-update
sudo dnf upgrade
</code></pre>
<h1 id="自动补全">自动补全</h1>
<pre><code>sudo dnf install bash-completion
source ~/.bashrc
</code></pre>
<h1 id="安装wget">安装wget</h1>
<pre><code>sudo yum -y install wget
</code></pre>
<hr>
<p>参考链接：<br>
<a href="https://www.cnblogs.com/fengdejiyixx/p/11592417.html">Centos和Ubuntu系统最小化安装基础命令</a><br>
<a href="https://linuxconfig.org/ubuntu-20-04-server-installation">Ubuntu 20.04 Server Installation</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用virsh删除kvm虚拟机]]></title>
        <id>https://tomhht.github.io/post/shi-yong-virsh-shan-chu-kvm-xu-ni-ji/</id>
        <link href="https://tomhht.github.io/post/shi-yong-virsh-shan-chu-kvm-xu-ni-ji/">
        </link>
        <updated>2020-09-10T06:21:16.000Z</updated>
        <summary type="html"><![CDATA[<p>发现libvirt/images下有个qcow2文件挺大，于是想用virsh安全删掉。</p>
]]></summary>
        <content type="html"><![CDATA[<p>发现libvirt/images下有个qcow2文件挺大，于是想用virsh安全删掉。</p>
<!-- more -->
<h1 id="列出虚拟机">列出虚拟机</h1>
<p>开始没用sudo，结果啥都没有，明明记得之前搞过俩呢。</p>
<pre><code>sudo virsh list --all
 Id    Name                           State
----------------------------------------------------
 -     vm1                            shut off
 -     vm2                            shut off
</code></pre>
<h1 id="检查虚拟机配置">检查虚拟机配置</h1>
<pre><code>sudo virsh dumpxml vm1 | grep 'source file'
    &lt;source file='/var/lib/libvirt/images/cirros-0.5.1-x86_64-disk.img'/&gt;
    &lt;source file='/var/lib/libvirt/images/vm1.qcow2'/&gt; #要删这个
</code></pre>
<h1 id="编辑配置">编辑配置</h1>
<p>确保该虚拟机未运行。删除配置中挂载<code>vm1.qcow2</code>的段落。</p>
<pre><code>sudo virsh edit vm1
# 删除这段
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='qcow2'/&gt;
      &lt;source file='/var/lib/libvirt/images/vm1.qcow2'/&gt;
      &lt;target dev='hda' bus='ide'/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
    &lt;/disk&gt; 
</code></pre>
<h1 id="删除文件">删除文件</h1>
<pre><code>sudo rm /var/lib/libvirt/images/vm1.qcow2
</code></pre>
<p>搞定。</p>
<hr>
<p>参考链接：<br>
<a href="https://huataihuang.gitbooks.io/cloud-atlas/content/virtual/kvm/startup/in_action/delete_a_running_vm_on_kvm.html">使用virsh删除运行的KVM VM · Cloud Atlas</a><br>
<a href="https://www.jianshu.com/p/5111134452a8">KVM磁盘扩容和添加</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[在Ubuntu上用snap安装Helm]]></title>
        <id>https://tomhht.github.io/post/zai-ubuntu-shang-yong-snap-an-zhuang-helm/</id>
        <link href="https://tomhht.github.io/post/zai-ubuntu-shang-yong-snap-an-zhuang-helm/">
        </link>
        <updated>2020-09-07T08:45:29.000Z</updated>
        <summary type="html"><![CDATA[<p>命令挺简单，就是速度很感人。</p>
]]></summary>
        <content type="html"><![CDATA[<p>命令挺简单，就是速度很感人。</p>
<!-- more -->
<h1 id="安装">安装</h1>
<pre><code>sudo snap install helm --classic
</code></pre>
<p>安装过慢的解决办法还没尝试，参考链接先记录下来了，先谢谢原作者。</p>
<blockquote>
<p>据官方说明，Helm 3已经不需要Tiller了，所以其他参考资料上安装Tiller的步骤直接跳过。</p>
</blockquote>
<h1 id="配置">配置</h1>
<h2 id="自动补全">自动补全</h2>
<pre><code>echo 'source &lt;(helm completion bash)' &gt;&gt;~/.bashrc
source ~/.bashrc #使配置立刻生效
</code></pre>
<hr>
<p>参考链接：<br>
<a href="https://helm.sh/">Helm官方</a><br>
<a href="https://kuricat.com/gist/snap-install-too-slow-zmbjy">snap install 过慢 的解决方法 @Kurisu</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[k8s测试mysql挂载nfs遇到的问题]]></title>
        <id>https://tomhht.github.io/post/pei-zhi-nfs/</id>
        <link href="https://tomhht.github.io/post/pei-zhi-nfs/">
        </link>
        <updated>2020-09-06T07:50:41.000Z</updated>
        <summary type="html"><![CDATA[<p>学习nfs的配置，并测试k8s部署mysql挂载nfs的方式。</p>
]]></summary>
        <content type="html"><![CDATA[<p>学习nfs的配置，并测试k8s部署mysql挂载nfs的方式。</p>
<!-- more -->
<h1 id="配置nfs">配置nfs</h1>
<h2 id="ubuntu">Ubuntu</h2>
<p>先将参考链接放这儿。<a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-an-nfs-mount-on-ubuntu-20-04">How To Set Up an NFS Mount on Ubuntu 20.04</a></p>
<h2 id="centos">CentOS</h2>
<p><a href="https://qizhanming.com/blog/2018/08/08/how-to-install-nfs-on-centos-7">CentOS 7 下 yum 安装和配置 NFS</a></p>
<h1 id="k8s测试遇到的问题">k8s测试遇到的问题</h1>
<h2 id="镜像pull不下来">镜像pull不下来</h2>
<p><strong>问题描述</strong><br>
测试mysql挂载nfs失败了n次，一开始是镜像pull不下来。<br>
<strong>解决</strong><br>
后来添加阿里云加速器后重启node上的docker <code>sudo systemctl restart docker.service</code>解决了pull的问题。</p>
<h2 id="pod遇到backoff的错误">pod遇到backoff的错误</h2>
<p><strong>问题描述</strong><br>
pull下来了还是运行失败，pod总是显示backoff <code>Back-off restarting failed container</code>的错误，通过<code>kubectl logs &lt;mysql pod的名字&gt;</code>发现<code>chown: changing ownership of '/var/lib/mysql/': Operation not permitted</code>错误。<br>
<strong>解决</strong><br>
nfs配置文件<code>/etc/exports</code>里，加上了<code>no_root_squash</code>的选项。</p>
<hr>
<p>参考链接：<br>
<a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-an-nfs-mount-on-ubuntu-20-04">How To Set Up an NFS Mount on Ubuntu 20.04</a><br>
<a href="https://qizhanming.com/blog/2018/08/08/how-to-install-nfs-on-centos-7">CentOS 7 下 yum 安装和配置 NFS</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Kubernetes busybox nslookup提示无法解析的问题]]></title>
        <id>https://tomhht.github.io/post/kubernetes-busybox-nslookup-ti-shi-wu-fa-jie-xi-de-wen-ti/</id>
        <link href="https://tomhht.github.io/post/kubernetes-busybox-nslookup-ti-shi-wu-fa-jie-xi-de-wen-ti/">
        </link>
        <updated>2020-09-05T07:43:38.000Z</updated>
        <summary type="html"><![CDATA[<p>使用默认版本的busybox会出现nslookup提示无法解析的问题。使用1.28.3版本即可解决。</p>
]]></summary>
        <content type="html"><![CDATA[<p>使用默认版本的busybox会出现nslookup提示无法解析的问题。使用1.28.3版本即可解决。</p>
<!-- more -->
<p>症状：</p>
<pre><code>kubectl run busybox --rm -it --image=busybox /bin/sh
/ # nslookup httpd-svc
Server:		10.96.0.10
Address:	10.96.0.10:53

** server can't find httpd-svc.default.svc.cluster.local: NXDOMAIN

*** Can't find httpd-svc.svc.cluster.local: No answer
*** Can't find httpd-svc.cluster.local: No answer
*** Can't find httpd-svc.default.svc.cluster.local: No answer
*** Can't find httpd-svc.svc.cluster.local: No answer
*** Can't find httpd-svc.cluster.local: No answer
</code></pre>
<p>解决：</p>
<pre><code>kubectl run busybox --rm -it --image=busybox:1.28.3 /bin/sh
If you don't see a command prompt, try pressing enter.
/ # nslookup httpd-svc
Server:    10.96.0.10
Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local

Name:      httpd-svc
Address 1: 10.108.142.200 httpd-svc.default.svc.cluster.local
</code></pre>
<hr>
<p>参考链接：<br>
<a href="https://www.cnblogs.com/vincenshen/p/9751193.html">https://www.cnblogs.com/vincenshen/p/9751193.html</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[第一次正式开车]]></title>
        <id>https://tomhht.github.io/post/di-yi-ci-zheng-shi-kai-che/</id>
        <link href="https://tomhht.github.io/post/di-yi-ci-zheng-shi-kai-che/">
        </link>
        <updated>2020-09-05T05:44:19.000Z</updated>
        <summary type="html"><![CDATA[<p>拿了本大半年了，昨天第一次正式开车。</p>
]]></summary>
        <content type="html"><![CDATA[<p>拿了本大半年了，昨天第一次正式开车。</p>
<!-- more -->
<p>太刺激了。画龙、剐蹭、油合离门，应有尽有。科三考了3次才过，考过后抽奖中了一个陪练机会，跟着教练开了趟易县（同练的还有其他学员）。这就是之前全部的开车经历了。<br /><br>
昨天因为要接侄子，学校在一个鸟不拉屎的地方，约不到车，所以硬着头皮把家里的车开出来了。首先找地方掉头，光顾着看后面，结果车头蹭人家墙上了，引得人家出来检查。<br /><br>
好不容易掉好头，跟别的车交汇，一闪躲，噌，又是一声，之前左边，这次右边。<br /><br>
继续前行，后来想想，居然当时心态没崩。<br /><br>
画龙前行，志玲姐姐忽然来一句右转立刻左转，我这路口到底怎么走啊，遂决定直接左转，进了左转车道等红灯，发现右转后走10米果然有左转路，WTF。左转车道硬着头皮左转完了，终于找到一个路口直接掉头，走上了康庄大道。<br /><br>
转完了突然道路宽阔了起来，路上也没几辆车，于是let's go，4档的干活，这感觉就是乌龟爬到了兔子身上。<br /><br>
到校后，等了几个钟头，中途又开着出去练练手，接上娃后返程的路途也算有惊无险，终于平安的运送回家。庆幸的是这一路没有倒车入库、侧方停车之类的技术活。万幸。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[k8s集群跨节点pods无法ping通以及无法curl]]></title>
        <id>https://tomhht.github.io/post/k8s-ji-qun-kua-jie-dian-pods-wu-fa-ping-tong/</id>
        <link href="https://tomhht.github.io/post/k8s-ji-qun-kua-jie-dian-pods-wu-fa-ping-tong/">
        </link>
        <updated>2020-09-03T10:33:25.000Z</updated>
        <summary type="html"><![CDATA[<p>除了k8s要求的端口要开，worker node上面的<code>8472/udp（vxlan backend）</code>也得开。（尽管参考链接里明确的是worker node要开，但master似乎也得开，否则master里面的coredns无法为worker node服务）</p>
]]></summary>
        <content type="html"><![CDATA[<p>除了k8s要求的端口要开，worker node上面的<code>8472/udp（vxlan backend）</code>也得开。（尽管参考链接里明确的是worker node要开，但master似乎也得开，否则master里面的coredns无法为worker node服务）</p>
<!-- more -->
<p>用<code>nmcli</code>查看，发现flannel 用到的是<code>vxlan backend</code>，因此需要打开<code>8472/udp</code>。<br  /><br>
打开后，发现Ubuntu的node可以被ping通，同时如果上面跑着<code>httpd</code>，其他node也可以<code>curl</code>到内容；而CentOS只能被ping通，<code>curl 10.244.2.19</code>的时候会显示<code>curl: (7) Failed to connect to 10.244.2.19 port 80: No route to host</code>。<br /><br>
查了n多资料，几乎都是关闭防火墙，关闭后确实能解决，但我想这不是生产环境中的做法。最终在这位仁兄Louis He的博文<a href="https://www.cnblogs.com/Dev0ps/p/11401530.html">Kubernetes集群开启Firewall</a>中找到答案<code>add-masquerade</code>。同时也谢谢让我找到8472端口的仁兄<a href="https://www.codenong.com/39293441/">关于网络：Kubernetes集群所需的端口</a>。</p>
<pre><code># Ubuntu
sudo ufw allow 8472/udp #搞定

# CentOS
sudo firewall-cmd --zone=public --add-port=8472/udp --permanent
sudo firewall-cmd --reload #这步搞完只能被ping通，curl时是No route to host，头疼死了
sudo firewall-cmd --add-masquerade --permanent
sudo firewall-cmd --reload #这才把curl也打通了，我太难了
</code></pre>
<hr>
<p>参考链接：<br>
<a href="https://www.codenong.com/39293441/">https://www.codenong.com/39293441/</a><br>
<a href="https://www.cnblogs.com/Dev0ps/p/11401530.html">https://www.cnblogs.com/Dev0ps/p/11401530.html</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[圣莲山随笔]]></title>
        <id>https://tomhht.github.io/post/sheng-lian-shan-sui-bi/</id>
        <link href="https://tomhht.github.io/post/sheng-lian-shan-sui-bi/">
        </link>
        <updated>2020-09-03T06:39:26.000Z</updated>
        <summary type="html"><![CDATA[<p>上周六去了趟圣莲山，陪人散心，尽管好像只是把他当作车夫。</p>
]]></summary>
        <content type="html"><![CDATA[<p>上周六去了趟圣莲山，陪人散心，尽管好像只是把他当作车夫。</p>
<!-- more -->
<p>建议买观光车的票，否则从入口到正经爬山点有7里地，走个往返就该打道回府了。<br /><br>
之前只是听人说过，这次别人想散心，于是推荐此地，想散心的当了全程司机。坐在车上往山里去是越来越凉快，途中也见到了十分陡峭的山，果然房山就是山多。<br /><br>
散心人腿受伤了，因此到了景区后尽量搞不需要用腿的项目，比如观光车、缆车（内心OS：既然腿不好，来山上干啥）。<br /><br>
其实本人是第一次坐缆车，稍微往下看看，确实有点腿软。同时想起意大利的一首民歌，就叫缆车，讲的是18几几年的事儿，有个老板搞山区旅游项目，于是搞了人力缆车，并且专门找作曲家写了个曲子，就是缆车，实际上原文的发音是fu ni ku li fu ni ku la，模拟缆车的声音，这个歌曲更准确说应该类似于咱们的劳动号子，大家边唱边使劲拉绳子。曲子非常欢快，进行曲的那种感觉，很多歌剧演员都唱过，比如著名的帕瓦罗蒂。但我第一次听是在芒果台的声入人心，一遍就喜欢上了。我妈觉得有些段落像是鬼子进村。<br /><br>
缆车上山后，直奔观光车司机推荐的必去景点，一个叫圣莲宝塔，一个叫莲子峰。圣莲宝塔就是后人翻建的一个建筑，每层都绘制了佛教的故事。其实更喜欢纯的古建筑，或者以古修古的那种，可惜这个宝塔之前彻底倒塌了。塔旁边的山上还有题字，开始还以为是书法家才会题字，可这个字怎么看都觉得挺小学生的（没有侮辱小学生的意思），一直也联想不到是哪位大家的风格。正暗自感叹见识太少，忽听得旁人百度的结果，题字人正是宝塔翻建的出资人之一，心里的大石头终于落地，看来自己审美没出大问题。旁人也怀同样感觉，大家都释然了。当然出资人的功德肯定是大大的。<br /><br>
实际上两个景点带来的感觉没有太震撼，但是游玩这种事情，过程才是核心。中间还路过一个景点叫八仙洞，就是在山上凿穿了个洞，看洞壁的坑坑洼洼，猜测应该是前人一凿一斧的心血，洞内凉气十足，且洞顶还有渗水滴下，我们感叹应该穿棉袄进来。后来散心人在洞外忽悠后来者，说洞里租军大衣。一个几岁的小男孩说什么也不进去，跟爸妈说里面可怕，我在想估计他们一家就要就此打住了，结果孩子爸妈想了个办法，把孩子抱上让孩子趴肩头挡住眼睛，直接就进去了。这都行，孩子就是孩子。<br /><br>
之后我们找了个僻静处吃午饭，说实话背了一路，烧饼、香肠还有水，累死我了。我爸买的这香肠也有个性，外面塑料皮剥开，里面居然还有一层塑料膜，我还没叫出来，散心人已经一口啃下并吞下了一角塑料膜。这肠有个性，这人更有个性。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[k8s操作笔记]]></title>
        <id>https://tomhht.github.io/post/k8s-cao-zuo-bi-ji/</id>
        <link href="https://tomhht.github.io/post/k8s-cao-zuo-bi-ji/">
        </link>
        <updated>2020-09-02T09:00:52.000Z</updated>
        <summary type="html"><![CDATA[<p>实操遇到问题好多，记录下。</p>
]]></summary>
        <content type="html"><![CDATA[<p>实操遇到问题好多，记录下。</p>
<!-- more -->
<h1 id="image拉取失败replicas被弃用">image拉取失败，replicas被弃用</h1>
<h2 id="问题">问题</h2>
<pre><code># 执行run，显示replicas has been deprecated，因此不生效，只部署了1个实例 
kubectl run httpd-app --image=httpd --replicas=2
# 检查pods运行情况，READY列显示未就绪
kubectl get pods -n wide
# 检查运行细节，一直显示pulling
kubectl describe pods httpd-app
</code></pre>
<h2 id="解决">解决</h2>
<ol>
<li>删除之前的部署：</li>
</ol>
<pre><code>kubectl delete pods httpd-app
</code></pre>
<ol start="2">
<li>创建部署文件：</li>
</ol>
<pre><code>cd ~/k8s
nano nginx.yaml
</code></pre>
<ol start="3">
<li>粘贴下面内容进nginx.yaml：</li>
</ol>
<pre><code># API 版本号
apiVersion: apps/v1
# 类型，如：Pod/ReplicationController/Deployment/Service/Ingress
kind: Deployment
metadata:
  # Kind 的名称
  name: nginx-app
spec:
  selector:
    matchLabels:
      # 容器标签的名字，发布 Service 时，selector 需要和这里对应
      app: nginx
  # 部署的实例数量
  replicas: 2
  template:
    metadata:
      labels:
        app: nginx
    spec:
      # 配置容器，数组类型，说明可以配置多个容器
      containers:
      # 容器名称
      - name: nginx
        # 容器镜像
        image: nginx:1.17
        # 只有镜像不存在时，才会进行镜像拉取
        imagePullPolicy: IfNotPresent
        ports:
        # Pod 端口
        - containerPort: 80
</code></pre>
<ol start="4">
<li>创建：</li>
</ol>
<pre><code>kubectl apply -f nginx.yaml
</code></pre>
<ol start="5">
<li>检查：</li>
</ol>
<pre><code>kubectl get deployments
kubectl describe deployment nginx-app
kubectl get replicaset
kubectl describe rs nginx-app-5d85b5fb59
kubectl get pods -o wide
kubectl describe pods nginx-app-5d85b5fb59-2ct5p
</code></pre>
<ol start="6">
<li>暴露服务：</li>
</ol>
<pre><code>kubectl expose deployment nginx-app --port=80 --type=LoadBalancer
</code></pre>
<ol start="7">
<li>查看服务状态(查看对外的端口)</li>
</ol>
<pre><code>kubectl get services
</code></pre>
<p><code>nginx-app</code>一直处于pending状态，应该是type设置为<code>LoadBalancer</code>，但没有云服务商和本地服务提供该功能。</p>
<hr>
<p>参考链接：<br>
<a href="https://blog.csdn.net/qq_43279371/article/details/107768713">https://blog.csdn.net/qq_43279371/article/details/107768713</a><br>
<a href="https://blog.csdn.net/kenkao/article/details/86764788">https://blog.csdn.net/kenkao/article/details/86764788</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[配置Ubuntu和CentOS清华源]]></title>
        <id>https://tomhht.github.io/post/pei-zhi-ubuntu-he-centos-qing-hua-yuan/</id>
        <link href="https://tomhht.github.io/post/pei-zhi-ubuntu-he-centos-qing-hua-yuan/">
        </link>
        <updated>2020-09-01T11:56:40.000Z</updated>
        <summary type="html"><![CDATA[<p>加快Ubuntu和CentOS软件下载速度。</p>
]]></summary>
        <content type="html"><![CDATA[<p>加快Ubuntu和CentOS软件下载速度。</p>
<!-- more -->
<h1 id="ubuntu">Ubuntu</h1>
<p>备份源配置文件：</p>
<pre><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
</code></pre>
<p>使用vim或gedit编辑source.list，用下面内容替换原有内容：</p>
<pre><code># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse

# 预发布软件源，不建议启用
# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse
</code></pre>
<p>更新软件包缓存，使配置文件生效：</p>
<pre><code>sudo apt-get update
</code></pre>
<h1 id="centos">CentOS</h1>
<pre><code>path='/etc/yum.repos.d/'
repos=(CentOS-AppStream.repo CentOS-Base.repo CentOS-centosplus.repo CentOS-Extras.repo CentOS-PowerTools.repo)
for repo in ${repos[@]}; do
sudo cp $path$repo $path$repo'.bak' #备份源配置文件
sudo sed -i &quot;s/^mirrorlist/#&amp;/; s/^#baseurl/baseurl/; s/http:\/\/mirror.centos.org\/\$contentdir/https:\/\/mirrors.tuna.tsinghua.edu.cn\/centos/&quot; $path$repo #修改配置文件
done
# 更新软件包缓存，使配置文件生效
sudo yum makecache
</code></pre>
<hr>
<p>参考链接：<br>
<a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/</a><br>
<a href="https://blog.csdn.net/xiangxianghehe/article/details/105688062">https://blog.csdn.net/xiangxianghehe/article/details/105688062</a><br>
<a href="https://mirror.tuna.tsinghua.edu.cn/help/centos/">https://mirror.tuna.tsinghua.edu.cn/help/centos/</a></p>
]]></content>
    </entry>
</feed>