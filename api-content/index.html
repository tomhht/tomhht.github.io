{"posts":[{"title":"在Ubuntu 20.04上使用Kubeadm部署Kubernetes集群","content":"关键词 Kubernetes, Kubeadm, Kubectl, Kubelet, Ubuntu, CentOS, Flannel, Docker, Aliyun, 阿里云 写作背景 初学Kubernetes，虽然网上资源很多，但没一个能彻底搞定，于是杂烩一下。 安装前的准备工作 设置iptables 执行下面代码： cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 EOF sudo sysctl --system 打开端口 先打开Ubuntu自带的防火墙ufw，因为ufw设置似乎更简单一些。执行下面代码： sudo ufw enable 执行后提示可能断开连接，直接y继续，别担心，ssh连接不会断。 如果使用ssh连接，还需要执行下面代码，以便打开ssh连接： sudo ufw allow ssh 接下来分别设置： 控制节点 Control-plane nodes sudo ufw allow 6443/tcp sudo ufw allow 2379:2380/tcp sudo ufw allow 10250:10252/tcp 上面代码中的冒号代表端口区间，如10250:10252代表10250、10251、10252这3个端口一起设置。 2. 工作节点 Worker nodes sudo ufw allow 10250/tcp sudo ufw allow 30000:32767/tcp 禁用swap 由于swap性能低下，Kubeadm默认要求禁止使用swap。执行如下代码： sudo swapoff -a #临时禁用 sudo sed -i 's/.*swap.*/#&amp;/' /etc/fstab #永久禁用 可通过free -m来检查禁用效果。 未完待续... ","link":"https://tomhht.github.io/post/zai-ubuntu-2004-shang-shi-yong-kubeadm-bu-shu-kubernetes-ji-qun/"}]}